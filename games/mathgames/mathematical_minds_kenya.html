<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mathematical Minds Kenya - Progressive Math Adventure</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Comic Sans MS", cursive, sans-serif;
        background: linear-gradient(
          135deg,
          #4169e1 0%,
          #1e90ff 50%,
          #87ceeb 100%
        );
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .container {
        background: white;
        border-radius: 30px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 1000px;
        width: 100%;
        padding: 40px;
        position: relative;
        overflow: hidden;
      }

      .container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 10px;
        background: linear-gradient(90deg, #4169e1, #ffd700, #1e90ff);
      }

      h1 {
        color: #1e3a8a;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .subtitle {
        text-align: center;
        color: #3b82f6;
        font-size: 1.2em;
        margin-bottom: 30px;
        font-weight: bold;
      }

      .grade-selector {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 30px;
      }

      .grade-btn {
        padding: 10px 20px;
        background: #e0e7ff;
        border: 2px solid #3b82f6;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        color: #1e3a8a;
      }

      .grade-btn:hover,
      .grade-btn.active {
        background: #3b82f6;
        color: white;
        transform: translateY(-2px);
      }

      .game-area {
        background: #f8fafc;
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 30px;
        border: 3px solid #dbeafe;
        min-height: 300px;
      }

      .problem-display {
        text-align: center;
        font-size: 3em;
        color: #1e3a8a;
        margin-bottom: 30px;
        font-weight: bold;
        padding: 20px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .input-section {
        text-align: center;
        margin-bottom: 30px;
      }

      .answer-input {
        font-size: 2em;
        padding: 15px 30px;
        border: 3px solid #3b82f6;
        border-radius: 15px;
        text-align: center;
        max-width: 300px;
        margin: 0 auto;
        display: block;
      }

      .answer-input:focus {
        outline: none;
        border-color: #1d4ed8;
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
      }

      .options-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin: 30px 0;
      }

      .option-btn {
        padding: 20px;
        font-size: 1.5em;
        background: #e0e7ff;
        border: 3px solid #3b82f6;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: inherit;
        font-weight: bold;
        color: #1e3a8a;
      }

      .option-btn:hover {
        background: #dbeafe;
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      }

      .option-btn.correct {
        background: #10b981;
        border-color: #059669;
        color: white;
        animation: bounce 0.5s;
      }

      .option-btn.incorrect {
        background: #ef4444;
        border-color: #dc2626;
        color: white;
        animation: shake 0.5s;
      }

      .score-board {
        display: flex;
        justify-content: space-between;
        background: #fef3c7;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
      }

      .score-item {
        text-align: center;
      }

      .score-label {
        font-size: 0.9em;
        color: #92400e;
        margin-bottom: 5px;
      }

      .score-value {
        font-size: 1.8em;
        font-weight: bold;
        color: #d97706;
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
      }

      .control-btn {
        padding: 15px 30px;
        font-size: 1.1em;
        background: #3b82f6;
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: inherit;
        font-weight: bold;
      }

      .control-btn:hover {
        background: #1d4ed8;
        transform: translateY(-3px);
      }

      .control-btn:disabled {
        background: #9ca3af;
        cursor: not-allowed;
        transform: none;
      }

      .feedback {
        text-align: center;
        font-size: 1.3em;
        margin: 20px 0;
        font-weight: bold;
        min-height: 40px;
        padding: 15px;
        border-radius: 10px;
      }

      .feedback.correct {
        color: #10b981;
        background: #d1fae5;
        border: 2px solid #6ee7b7;
      }

      .feedback.incorrect {
        color: #ef4444;
        background: #fee2e2;
        border: 2px solid #fca5a5;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #e5e7eb;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 20px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #10b981, #34d399);
        width: 0%;
        transition: width 0.5s ease;
      }

      .back-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        background: #3b82f6;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-family: inherit;
        font-weight: bold;
        text-decoration: none;
        display: inline-block;
      }

      .back-btn:hover {
        background: #1d4ed8;
      }

      .math-tip {
        background: #fff7ed;
        border-left: 4px solid #f59e0b;
        padding: 15px;
        margin: 15px 0;
        border-radius: 5px;
        font-style: italic;
        color: #92400e;
      }

      @keyframes bounce {
        0%,
        20%,
        60%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        80% {
          transform: translateY(-5px);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-10px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(10px);
        }
      }

      .grade-indicator {
        text-align: center;
        background: #dbeafe;
        padding: 10px;
        border-radius: 10px;
        margin-bottom: 20px;
        font-weight: bold;
        color: #1e3a8a;
      }

      @media (max-width: 768px) {
        .container {
          padding: 20px;
        }

        h1 {
          font-size: 2em;
        }

        .problem-display {
          font-size: 2em;
        }

        .options-grid {
          grid-template-columns: 1fr;
        }

        .grade-selector {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <a href="../games.html" class="back-btn">‚Üê Back to Games</a>

      <h1>üß† Mathematical Minds Kenya</h1>
      <p class="subtitle">
        Progressive math learning from counting to algebra!
      </p>

      <div class="grade-selector">
        <div class="grade-btn active" data-grade="1" onclick="selectGrade(1)">
          Grade 1
        </div>
        <div class="grade-btn" data-grade="2" onclick="selectGrade(2)">
          Grade 2
        </div>
        <div class="grade-btn" data-grade="3" onclick="selectGrade(3)">
          Grade 3
        </div>
        <div class="grade-btn" data-grade="4" onclick="selectGrade(4)">
          Grade 4
        </div>
        <div class="grade-btn" data-grade="5" onclick="selectGrade(5)">
          Grade 5
        </div>
        <div class="grade-btn" data-grade="6" onclick="selectGrade(6)">
          Grade 6
        </div>
        <div class="grade-btn" data-grade="7" onclick="selectGrade(7)">
          Grade 7
        </div>
        <div class="grade-btn" data-grade="8" onclick="selectGrade(8)">
          Grade 8
        </div>
        <div class="grade-btn" data-grade="9" onclick="selectGrade(9)">
          Grade 9
        </div>
      </div>

      <div class="score-board">
        <div class="score-item">
          <div class="score-label">Score</div>
          <div class="score-value" id="score">0</div>
        </div>
        <div class="score-item">
          <div class="score-label">Level</div>
          <div class="score-value" id="level">1</div>
        </div>
        <div class="score-item">
          <div class="score-label">Streak</div>
          <div class="score-value" id="streak">0</div>
        </div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>

      <div class="game-area">
        <div class="grade-indicator" id="gradeIndicator">
          Grade 1 - Basic Counting & Addition
        </div>

        <div class="problem-display" id="problemDisplay">2 + 3 = ?</div>

        <div id="answerSection">
          <!-- Will be populated based on grade level -->
        </div>
      </div>

      <div class="feedback" id="feedback"></div>

      <div class="controls">
        <button class="control-btn" onclick="checkAnswer()" id="checkBtn">
          Check Answer
        </button>
        <button class="control-btn" onclick="nextProblem()">
          Next Problem
        </button>
        <button class="control-btn" onclick="resetGame()">New Game</button>
      </div>
    </div>

    <script>
      const mathProblems = {
        1: {
          title: "Grade 1 - Basic Counting & Addition",
          type: "multiple_choice",
          problems: [
            { question: "2 + 3", answer: 5, choices: [4, 5, 6, 7] },
            { question: "5 - 2", answer: 3, choices: [2, 3, 4, 5] },
            { question: "1 + 4", answer: 5, choices: [3, 4, 5, 6] },
            { question: "6 - 1", answer: 5, choices: [4, 5, 6, 7] },
          ],
        },
        2: {
          title: "Grade 2 - Two-Digit Addition",
          type: "multiple_choice",
          problems: [
            { question: "12 + 15", answer: 27, choices: [25, 26, 27, 28] },
            { question: "23 - 14", answer: 9, choices: [8, 9, 10, 11] },
            { question: "17 + 18", answer: 35, choices: [33, 34, 35, 36] },
          ],
        },
        3: {
          title: "Grade 3 - Multiplication Tables",
          type: "multiple_choice",
          problems: [
            { question: "3 √ó 4", answer: 12, choices: [10, 11, 12, 13] },
            { question: "5 √ó 6", answer: 30, choices: [28, 29, 30, 31] },
            { question: "7 √ó 8", answer: 56, choices: [54, 55, 56, 57] },
          ],
        },
        4: {
          title: "Grade 4 - Division & Fractions",
          type: "input",
          problems: [
            { question: "24 √∑ 6", answer: 4 },
            { question: "45 √∑ 9", answer: 5 },
            { question: "1/2 + 1/4 = ? (as decimal)", answer: 0.75 },
          ],
        },
        5: {
          title: "Grade 5 - Decimals & Percentages",
          type: "input",
          problems: [
            { question: "0.5 + 0.25", answer: 0.75 },
            { question: "What is 25% of 80?", answer: 20 },
            { question: "3.2 √ó 4", answer: 12.8 },
          ],
        },
        6: {
          title: "Grade 6 - Area & Volume",
          type: "input",
          problems: [
            { question: "Area of rectangle: length=5, width=3", answer: 15 },
            { question: "Volume of cube with side=4", answer: 64 },
            { question: "Perimeter of square with side=7", answer: 28 },
          ],
        },
        7: {
          title: "Grade 7 - Basic Algebra",
          type: "input",
          problems: [
            { question: "Solve for x: 2x + 3 = 11", answer: 4 },
            { question: "If y = 3x and x = 4, what is y?", answer: 12 },
            { question: "Solve: 5x - 7 = 18", answer: 5 },
          ],
        },
        8: {
          title: "Grade 8 - Linear Equations",
          type: "input",
          problems: [
            { question: "Solve: 3x + 2y = 12, when x = 2", answer: 3 },
            { question: "What is the slope of y = 2x + 5?", answer: 2 },
            { question: "Solve: 4(x + 3) = 20", answer: 2 },
          ],
        },
        9: {
          title: "Grade 9 - Quadratic Equations",
          type: "input",
          problems: [
            { question: "Solve: x¬≤ - 5x + 6 = 0 (smaller root)", answer: 2 },
            { question: "If f(x) = x¬≤ + 2x, what is f(3)?", answer: 15 },
            { question: "Expand: (x + 3)¬≤ coefficient of x", answer: 6 },
          ],
        },
      };

      let currentGrade = 1;
      let currentProblemIndex = 0;
      let score = 0;
      let level = 1;
      let streak = 0;
      let gameActive = true;
      let userAnswer = null;

      function selectGrade(grade) {
        currentGrade = grade;
        currentProblemIndex = 0;

        // Update grade buttons
        document.querySelectorAll(".grade-btn").forEach((btn) => {
          btn.classList.remove("active");
          if (parseInt(btn.dataset.grade) === grade) {
            btn.classList.add("active");
          }
        });

        displayProblem();
      }

      function displayProblem() {
        const gradeData = mathProblems[currentGrade];
        const problems = gradeData.problems;

        if (currentProblemIndex >= problems.length) {
          currentProblemIndex = 0;
          level++;
        }

        const problem = problems[currentProblemIndex];
        document.getElementById("gradeIndicator").textContent = gradeData.title;
        document.getElementById("problemDisplay").textContent =
          problem.question + (gradeData.type === "input" ? " = ?" : "");

        const answerSection = document.getElementById("answerSection");

        if (gradeData.type === "multiple_choice") {
          answerSection.innerHTML = `
                    <div class="options-grid">
                        ${problem.choices
                          .map(
                            (choice, index) =>
                              `<button class="option-btn" onclick="selectOption(${choice}, ${index})">${choice}</button>`
                          )
                          .join("")}
                    </div>
                `;
        } else {
          answerSection.innerHTML = `
                    <div class="input-section">
                        <input type="number" class="answer-input" id="answerInput" placeholder="Enter your answer..." step="any">
                    </div>
                `;
        }

        document.getElementById("feedback").textContent = "";
        document.getElementById("feedback").className = "feedback";
        gameActive = true;
      }

      function selectOption(selectedAnswer, buttonIndex) {
        if (!gameActive) return;

        userAnswer = selectedAnswer;
        const buttons = document.querySelectorAll(".option-btn");
        const problem =
          mathProblems[currentGrade].problems[currentProblemIndex];

        gameActive = false;

        if (selectedAnswer === problem.answer) {
          buttons[buttonIndex].classList.add("correct");
          showFeedback(true, problem.answer);
        } else {
          buttons[buttonIndex].classList.add("incorrect");
          // Highlight correct answer
          buttons.forEach((btn, index) => {
            if (parseInt(btn.textContent) === problem.answer) {
              btn.classList.add("correct");
            }
          });
          showFeedback(false, problem.answer);
        }

        setTimeout(() => nextProblem(), 3000);
      }

      function checkAnswer() {
        if (!gameActive) return;

        const answerInput = document.getElementById("answerInput");
        if (!answerInput) return;

        userAnswer = parseFloat(answerInput.value);
        const problem =
          mathProblems[currentGrade].problems[currentProblemIndex];

        gameActive = false;

        if (Math.abs(userAnswer - problem.answer) < 0.001) {
          answerInput.style.borderColor = "#10B981";
          answerInput.style.backgroundColor = "#D1FAE5";
          showFeedback(true, problem.answer);
        } else {
          answerInput.style.borderColor = "#EF4444";
          answerInput.style.backgroundColor = "#FEE2E2";
          showFeedback(false, problem.answer);
        }

        setTimeout(() => nextProblem(), 3000);
      }

      function showFeedback(isCorrect, correctAnswer) {
        const feedback = document.getElementById("feedback");

        if (isCorrect) {
          feedback.innerHTML = `
                    <div>üéâ Excellent! That's correct!</div>
                    <div class="math-tip">üí° Great mathematical thinking!</div>
                `;
          feedback.className = "feedback correct";

          score += 10 * currentGrade;
          streak++;

          if (streak > 0 && streak % 3 === 0) {
            score += 50; // Streak bonus
          }
        } else {
          feedback.innerHTML = `
                    <div>‚ùå Not quite right. The correct answer is ${correctAnswer}</div>
                    <div class="math-tip">üí° Keep practicing! Math skills grow with practice.</div>
                `;
          feedback.className = "feedback incorrect";

          streak = 0;
        }

        updateDisplay();
      }

      function nextProblem() {
        currentProblemIndex++;
        displayProblem();
      }

      function updateDisplay() {
        document.getElementById("score").textContent = score;
        document.getElementById("level").textContent = level;
        document.getElementById("streak").textContent = streak;

        const progress = ((currentProblemIndex % 5) / 5) * 100;
        document.getElementById("progress").style.width = progress + "%";
      }

      function resetGame() {
        score = 0;
        level = 1;
        streak = 0;
        currentProblemIndex = 0;
        updateDisplay();
        displayProblem();
      }

      // Handle Enter key for input mode
      document.addEventListener("keydown", function (event) {
        if (event.key === "Enter" && document.getElementById("answerInput")) {
          checkAnswer();
        }
      });

      // Initialize game
      resetGame();
    </script>
  </body>
</html>
