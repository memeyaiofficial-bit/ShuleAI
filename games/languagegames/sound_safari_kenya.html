<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sound Safari Kenya - Kenyan Pronunciation Adventure</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #ff6b35 0%,
          #f7931e 50%,
          #ffd23f 100%
        );
        min-height: 100vh;
        padding: 20px;
        position: relative;
        overflow-x: hidden;
      }

      .safari-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        opacity: 0.1;
      }

      .safari-animal {
        position: absolute;
        font-size: 3rem;
        animation: roam 8s ease-in-out infinite;
      }

      .safari-animal:nth-child(1) {
        top: 15%;
        left: 10%;
        animation-delay: 0s;
      }
      .safari-animal:nth-child(2) {
        top: 70%;
        right: 15%;
        animation-delay: 3s;
      }
      .safari-animal:nth-child(3) {
        bottom: 25%;
        left: 20%;
        animation-delay: 6s;
      }
      .safari-animal:nth-child(4) {
        top: 45%;
        right: 25%;
        animation-delay: 2s;
      }

      @keyframes roam {
        0%,
        100% {
          transform: translateX(0px) translateY(0px);
        }
        25% {
          transform: translateX(20px) translateY(-10px);
        }
        50% {
          transform: translateX(-15px) translateY(15px);
        }
        75% {
          transform: translateX(10px) translateY(-5px);
        }
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
      }

      .header {
        text-align: center;
        color: white;
        margin-bottom: 30px;
        animation: safariEntrance 2s ease-out;
      }

      .header h1 {
        font-size: 3.5rem;
        margin-bottom: 15px;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
      }

      .header p {
        font-size: 1.3rem;
        opacity: 0.95;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
      }

      .kenya-flag {
        display: inline-block;
        background: linear-gradient(
          to bottom,
          #000 33%,
          #d12d16 33% 66%,
          #14ad00 66%
        );
        width: 40px;
        height: 30px;
        border-radius: 5px;
        margin: 0 10px;
        position: relative;
      }

      .kenya-flag::after {
        content: "üõ°Ô∏è";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 1.2rem;
      }

      .stats-dashboard {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 20px;
        margin-bottom: 25px;
      }

      .stat-widget {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .stat-widget::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 193, 7, 0.1) 0%,
          transparent 50%
        );
        animation: shimmer 3s ease-in-out infinite;
      }

      @keyframes shimmer {
        0%,
        100% {
          transform: rotate(0deg);
        }
        50% {
          transform: rotate(180deg);
        }
      }

      .stat-widget:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      }

      .stat-icon {
        font-size: 2.5rem;
        margin-bottom: 12px;
        position: relative;
        z-index: 1;
      }

      .stat-label {
        font-size: 0.9rem;
        color: #666;
        margin-bottom: 8px;
        font-weight: 600;
      }

      .stat-value {
        font-size: 1.8rem;
        font-weight: bold;
        color: #d84315;
      }

      .game-container {
        background: rgba(255, 255, 255, 0.96);
        border-radius: 20px;
        padding: 35px;
        margin-bottom: 25px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        position: relative;
        border: 3px solid #ff6b35;
      }

      .game-container::before {
        content: "üá∞üá™";
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 2rem;
        opacity: 0.7;
      }

      .word-showcase {
        text-align: center;
        background: linear-gradient(135deg, #fff3e0, #ffe0b2);
        border-radius: 18px;
        padding: 40px;
        margin-bottom: 25px;
        border: 3px solid #ff8f00;
        position: relative;
      }

      .current-word {
        font-size: 3.2rem;
        font-weight: bold;
        color: #bf360c;
        margin-bottom: 18px;
        text-transform: uppercase;
        letter-spacing: 4px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .phonetic-display {
        font-size: 2rem;
        color: #f57c00;
        margin-bottom: 18px;
        font-family: "Courier New", monospace;
        background: rgba(255, 255, 255, 0.8);
        padding: 12px 25px;
        border-radius: 30px;
        display: inline-block;
        border: 2px solid #ffb74d;
      }

      .kenyan-context {
        background: #e8f5e8;
        border-radius: 15px;
        padding: 25px;
        margin: 25px 0;
        border: 3px solid #4caf50;
        position: relative;
      }

      .kenyan-context::before {
        content: "üóª";
        position: absolute;
        top: -15px;
        left: 25px;
        background: #e8f5e8;
        padding: 0 15px;
        font-size: 2rem;
      }

      .context-header {
        font-weight: bold;
        color: #2e7d32;
        margin-bottom: 15px;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .context-story {
        color: #1b5e20;
        font-style: italic;
        line-height: 1.7;
        font-size: 1.15rem;
        text-align: center;
      }

      .pronunciation-tools {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 30px 0;
        flex-wrap: wrap;
      }

      .safari-btn {
        background: linear-gradient(135deg, #e53935, #f44336);
        color: white;
        border: none;
        padding: 18px 35px;
        border-radius: 50px;
        font-size: 1.2rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(229, 57, 53, 0.3);
        display: inline-flex;
        align-items: center;
        gap: 12px;
        font-weight: 600;
      }

      .safari-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(229, 57, 53, 0.4);
      }

      .safari-btn.recording {
        background: linear-gradient(135deg, #c62828, #b71c1c);
        animation: safariPulse 1.2s infinite;
      }

      @keyframes safariPulse {
        0% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(198, 40, 40, 0.7);
        }
        70% {
          transform: scale(1.05);
          box-shadow: 0 0 0 10px rgba(198, 40, 40, 0);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(198, 40, 40, 0);
        }
      }

      .listen-btn {
        background: linear-gradient(135deg, #43a047, #4caf50);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
      }

      .listen-btn:hover {
        background: linear-gradient(135deg, #388e3c, #43a047);
        transform: translateY(-2px);
      }

      .feedback-zone {
        background: #f3e5f5;
        border-radius: 18px;
        padding: 30px;
        margin: 25px 0;
        border-left: 6px solid #9c27b0;
        display: none;
        text-align: center;
      }

      .feedback-zone.show {
        display: block;
        animation: safariReveal 0.6s ease-out;
      }

      @keyframes safariReveal {
        from {
          opacity: 0;
          transform: scale(0.8) translateY(-30px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      .feedback-emoji {
        font-size: 4rem;
        margin-bottom: 20px;
        animation: bounce 0.8s ease-in-out;
      }

      .feedback-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #6a1b9a;
        margin-bottom: 12px;
      }

      .feedback-message {
        color: #4a148c;
        line-height: 1.6;
        font-size: 1.1rem;
      }

      .progress-tracker {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 25px;
        margin: 25px 0;
        text-align: center;
      }

      .progress-header {
        font-size: 1.3rem;
        color: #d84315;
        margin-bottom: 18px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .progress-container {
        background: #e0e0e0;
        height: 25px;
        border-radius: 15px;
        overflow: hidden;
        margin: 15px 0;
        position: relative;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #ff6b35, #f7931e, #ffd23f);
        transition: width 0.6s ease;
        border-radius: 15px;
        position: relative;
      }

      .progress-bar::after {
        content: "ü¶Å";
        position: absolute;
        right: -15px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.5rem;
      }

      .level-indicator {
        display: inline-block;
        background: linear-gradient(135deg, #ff5722, #ff8a65);
        color: white;
        padding: 10px 25px;
        border-radius: 25px;
        font-weight: bold;
        margin-top: 15px;
        font-size: 1rem;
      }

      .continue-btn {
        background: linear-gradient(135deg, #1976d2, #42a5f5);
        color: white;
        border: none;
        padding: 18px 40px;
        border-radius: 30px;
        font-size: 1.3rem;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 25px auto;
        display: block;
        font-weight: 600;
      }

      .continue-btn:hover {
        background: linear-gradient(135deg, #1565c0, #1976d2);
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(25, 118, 210, 0.3);
      }

      .safari-tips {
        background: #fff8e1;
        border-radius: 18px;
        padding: 25px;
        margin-top: 25px;
        border: 3px solid #ffc107;
      }

      .tips-header {
        font-size: 1.3rem;
        color: #f57f17;
        margin-bottom: 18px;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .tip-card {
        background: rgba(255, 255, 255, 0.8);
        padding: 15px;
        margin: 12px 0;
        border-radius: 10px;
        border-left: 4px solid #ff9800;
        transition: all 0.3s ease;
      }

      .tip-card:hover {
        background: white;
        transform: translateX(5px);
      }

      .home-link {
        position: fixed;
        top: 25px;
        left: 25px;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        padding: 15px 25px;
        border-radius: 30px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        font-weight: 600;
      }

      .home-link:hover {
        background: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      @keyframes safariEntrance {
        0% {
          transform: scale(0.5) translateY(-100px);
          opacity: 0;
        }
        50% {
          transform: scale(1.1) translateY(-20px);
          opacity: 0.8;
        }
        100% {
          transform: scale(1) translateY(0);
          opacity: 1;
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-20px);
        }
        60% {
          transform: translateY(-10px);
        }
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 2.5rem;
        }
        .current-word {
          font-size: 2.2rem;
        }
        .stats-dashboard {
          grid-template-columns: repeat(2, 1fr);
        }
        .pronunciation-tools {
          flex-direction: column;
          align-items: center;
        }
        .safari-animal {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <button class="home-link" onclick="returnHome()">üè† Nyumbani (Home)</button>

    <div class="safari-background">
      <div class="safari-animal">ü¶Å</div>
      <div class="safari-animal">üêò</div>
      <div class="safari-animal">ü¶í</div>
      <div class="safari-animal">ü¶ì</div>
    </div>

    <div class="container">
      <div class="header">
        <h1>ü¶Å Sound Safari Kenya üá∞üá™</h1>
        <p>Master English pronunciation with Kenyan wildlife and landmarks!</p>
      </div>

      <div class="stats-dashboard">
        <div class="stat-widget">
          <div class="stat-icon">üèîÔ∏è</div>
          <div class="stat-label">Safari Level</div>
          <div class="stat-value" id="safariLevel">1</div>
        </div>
        <div class="stat-widget">
          <div class="stat-icon">üèÜ</div>
          <div class="stat-label">Pride Points</div>
          <div class="stat-value" id="pridePoints">0</div>
        </div>
        <div class="stat-widget">
          <div class="stat-icon">ü¶í</div>
          <div class="stat-label">Words Mastered</div>
          <div class="stat-value" id="wordsConquered">0</div>
        </div>
        <div class="stat-widget">
          <div class="stat-icon">üéØ</div>
          <div class="stat-label">Safari Accuracy</div>
          <div class="stat-value" id="safariAccuracy">0%</div>
        </div>
      </div>

      <div class="game-container">
        <div class="word-showcase">
          <div class="current-word" id="featuredWord">KILIMANJARO</div>
          <div class="phonetic-display" id="phoneticSounds">
            /Àåk…™l…ôm…ônÀàd í…ëÀêro ä/
          </div>
          <div class="level-indicator" id="wordDifficulty">
            üóª Mountain Level
          </div>
        </div>

        <div class="kenyan-context">
          <div class="context-header">üóª Kenyan Adventure Story</div>
          <div class="context-story" id="adventureStory">
            Mount Kilimanjaro towers majestically on the Kenya-Tanzania border,
            attracting brave climbers from around the world.
          </div>
        </div>

        <div class="pronunciation-tools">
          <button
            class="safari-btn"
            id="recordButton"
            onclick="toggleSafariRecording()"
          >
            üé§ Start Safari Recording
          </button>
          <button
            class="listen-btn"
            id="exampleButton"
            onclick="playKenyanExample()"
          >
            üîä Listen to Guide
          </button>
        </div>

        <div class="feedback-zone" id="safariResults">
          <div class="feedback-emoji" id="resultEmoji">üéâ</div>
          <div class="feedback-title" id="resultTitle">
            Excellent Safari Sound!
          </div>
          <div class="feedback-message" id="resultMessage">
            You've captured the spirit of Kenya perfectly!
          </div>
        </div>

        <div class="progress-tracker">
          <div class="progress-header">üöô Safari Journey Progress</div>
          <div class="progress-container">
            <div
              class="progress-bar"
              id="journeyProgress"
              style="width: 0%"
            ></div>
          </div>
          <div id="progressStatus">
            Exploring Kenya: 0/12 locations discovered
          </div>
        </div>

        <button
          class="continue-btn"
          id="continueButton"
          onclick="nextSafariLocation()"
          style="display: none"
        >
          Next Safari Destination ü¶å
        </button>
      </div>

      <div class="safari-tips">
        <div class="tips-header">ü¶è Safari Pronunciation Guide</div>
        <div class="tip-card">
          ü¶Å <strong>Lion's Roar:</strong> Speak with confidence and clear
          articulation like the king of the savanna
        </div>
        <div class="tip-card">
          üêò <strong>Elephant's Memory:</strong> Remember the rhythm and stress
          patterns of each word
        </div>
        <div class="tip-card">
          ü¶í <strong>Giraffe's Reach:</strong> Stretch your pronunciation to
          reach every syllable clearly
        </div>
        <div class="tip-card">
          ü¶ì <strong>Zebra's Stripes:</strong> Balance stressed and unstressed
          syllables like black and white stripes
        </div>
        <div class="tip-card">
          ü¶è <strong>Rhino's Power:</strong> Use the full force of your voice
          for strong consonant sounds
        </div>
      </div>
    </div>

    <script>
      class SoundSafariKenya {
        constructor() {
          this.safariWords = [
            {
              word: "KILIMANJARO",
              phonetic: "/Àåk…™l…ôm…ônÀàd í…ëÀêro ä/",
              story:
                "Mount Kilimanjaro towers majestically on the Kenya-Tanzania border, attracting brave climbers from around the world.",
              difficulty: "mountain",
            },
            {
              word: "MAASAI",
              phonetic: "/Ààm…ëÀêsa…™/",
              story:
                "The proud Maasai people are traditional pastoralists known for their vibrant red clothing and jumping dances.",
              difficulty: "grassland",
            },
            {
              word: "NAIROBI",
              phonetic: "/na…™Ààro äbi/",
              story:
                "Nairobi, the bustling capital city, serves as the gateway to Kenya's incredible safari adventures.",
              difficulty: "city",
            },
            {
              word: "SAFARI",
              phonetic: "/s…ôÀàf…ëÀêri/",
              story:
                "A thrilling safari through Kenya's national parks reveals magnificent wildlife in their natural habitat.",
              difficulty: "grassland",
            },
            {
              word: "ELEPHANT",
              phonetic: "/Àà…õl…ôf…ônt/",
              story:
                "Majestic elephants roam freely across the vast savannas of Amboseli National Park near Mount Kilimanjaro.",
              difficulty: "grassland",
            },
            {
              word: "RHINOCEROS",
              phonetic: "/ra…™Ààn…ëÀês…ôr…ôs/",
              story:
                "The endangered black rhinoceros finds sanctuary in Kenya's protected conservancies and national reserves.",
              difficulty: "mountain",
            },
            {
              word: "ACACIA",
              phonetic: "/…ôÀàke…™ É…ô/",
              story:
                "Iconic acacia trees dot the African landscape, providing shade for wildlife during hot safari days.",
              difficulty: "grassland",
            },
            {
              word: "AMBOSELI",
              phonetic: "/√¶mÀàbo äs…ôli/",
              story:
                "Amboseli National Park offers spectacular views of Mount Kilimanjaro and large elephant herds.",
              difficulty: "mountain",
            },
            {
              word: "TSAVO",
              phonetic: "/Ààts…ëÀêvo ä/",
              story:
                "Tsavo National Park, one of Kenya's largest parks, is famous for its red elephants and diverse wildlife.",
              difficulty: "mountain",
            },
            {
              word: "FLAMINGO",
              phonetic: "/fl…ôÀàm…™≈ã…°o ä/",
              story:
                "Pink flamingos create a stunning spectacle as they gather in thousands at Lake Nakuru.",
              difficulty: "water",
            },
            {
              word: "SAVANNA",
              phonetic: "/s…ôÀàv√¶n…ô/",
              story:
                "The golden savanna grasslands stretch endlessly, home to the Big Five and countless other species.",
              difficulty: "grassland",
            },
            {
              word: "CONSERVATION",
              phonetic: "/Àåk…ëÀêns…ôrÀàve…™ É…ôn/",
              story:
                "Kenya leads African conservation efforts to protect endangered wildlife for future generations.",
              difficulty: "expert",
            },
          ];

          this.currentIndex = 0;
          this.pridePoints = 0;
          this.safariLevel = 1;
          this.wordsConquered = 0;
          this.totalTries = 0;
          this.successfulTries = 0;
          this.isRecording = false;
          this.speechRecognition = null;

          this.initializeSafari();
        }

        initializeSafari() {
          this.updateSafariDisplay();
          this.setupSpeechTechnology();
          this.loadSafariWord();
        }

        setupSpeechTechnology() {
          if (
            "webkitSpeechRecognition" in window ||
            "SpeechRecognition" in window
          ) {
            const SpeechRecognition =
              window.SpeechRecognition || window.webkitSpeechRecognition;
            this.speechRecognition = new SpeechRecognition();
            this.speechRecognition.continuous = false;
            this.speechRecognition.interimResults = false;
            this.speechRecognition.lang = "en-US";

            this.speechRecognition.onresult = (event) => {
              const spokenWord = event.results[0][0].transcript.toUpperCase();
              this.evaluateSafariPronunciation(spokenWord);
            };

            this.speechRecognition.onerror = (event) => {
              console.error("Safari speech recognition error:", event.error);
              this.showSafariResults(
                "ü¶è",
                "Safari Challenge!",
                "The wildlife didn't quite catch that. Try again, brave explorer!",
              );
              this.stopSafariRecording();
            };

            this.speechRecognition.onend = () => {
              this.stopSafariRecording();
            };
          } else {
            console.warn(
              "Speech recognition not supported on this safari device",
            );
          }
        }

        loadSafariWord() {
          const wordData = this.safariWords[this.currentIndex];
          document.getElementById("featuredWord").textContent = wordData.word;
          document.getElementById("phoneticSounds").textContent =
            wordData.phonetic;
          document.getElementById("adventureStory").textContent =
            wordData.story;

          const difficultyLevels = {
            grassland: "üåø Grassland Level",
            water: "üåä Water Level",
            mountain: "üóª Mountain Level",
            city: "üèôÔ∏è City Level",
            expert: "ü¶Ö Expert Level",
          };
          document.getElementById("wordDifficulty").textContent =
            difficultyLevels[wordData.difficulty] || "üåø Grassland Level";

          document.getElementById("continueButton").style.display = "none";
          document.getElementById("safariResults").classList.remove("show");
          document.getElementById("exampleButton").disabled = false;
        }

        toggleSafariRecording() {
          if (this.isRecording) {
            this.stopSafariRecording();
          } else {
            this.startSafariRecording();
          }
        }

        startSafariRecording() {
          if (this.speechRecognition) {
            this.isRecording = true;
            const recordBtn = document.getElementById("recordButton");
            recordBtn.classList.add("recording");
            recordBtn.innerHTML = "‚èπÔ∏è Stop Safari Recording";

            try {
              this.speechRecognition.start();
            } catch (error) {
              console.error("Error starting safari recording:", error);
              this.stopSafariRecording();
            }
          }
        }

        stopSafariRecording() {
          this.isRecording = false;
          const recordBtn = document.getElementById("recordButton");
          recordBtn.classList.remove("recording");
          recordBtn.innerHTML = "üé§ Start Safari Recording";

          if (this.speechRecognition) {
            this.speechRecognition.stop();
          }
        }

        playKenyanExample() {
          const word = this.safariWords[this.currentIndex].word;
          if ("speechSynthesis" in window) {
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.rate = 0.7;
            utterance.pitch = 1.1;
            utterance.volume = 1;

            // Try to use a voice with African or British accent if available
            const voices = speechSynthesis.getVoices();
            const preferredVoice =
              voices.find(
                (voice) =>
                  voice.lang.includes("en-GB") ||
                  voice.lang.includes("en-ZA") ||
                  voice.name.toLowerCase().includes("british"),
              ) || voices.find((voice) => voice.lang.includes("en"));

            if (preferredVoice) {
              utterance.voice = preferredVoice;
            }

            speechSynthesis.speak(utterance);
          }
        }

        evaluateSafariPronunciation(spokenWord) {
          const targetWord = this.safariWords[this.currentIndex].word;
          const similarity = this.calculateWordSimilarity(
            spokenWord,
            targetWord,
          );

          this.totalTries++;

          if (
            similarity > 0.7 ||
            spokenWord.includes(targetWord) ||
            targetWord.includes(spokenWord)
          ) {
            this.handleSuccessfulPronunciation();
          } else if (similarity > 0.4) {
            this.showSafariResults(
              "ü¶ì",
              "Almost There, Explorer!",
              `You said "${spokenWord}". The safari animals almost understood - try emphasizing each syllable more clearly.`,
            );
          } else {
            this.showSafariResults(
              "ü¶è",
              "Keep Exploring!",
              `You said "${spokenWord}". Listen to the guide again and follow the phonetic sounds.`,
            );
          }
        }

        handleSuccessfulPronunciation() {
          this.successfulTries++;
          this.pridePoints += 15;
          this.wordsConquered++;

          const safariAchievements = [
            "ü¶Å Roaring success like the King of the Jungle!",
            "üêò Trumpeting triumph worthy of Amboseli!",
            "ü¶í Standing tall with giraffe-like excellence!",
            "ü¶ì Perfect stripes of pronunciation!",
            "ü¶è Charging forward with rhino strength!",
            "üå∏ Blooming like acacia flowers in the savanna!",
          ];

          const randomAchievement =
            safariAchievements[
              Math.floor(Math.random() * safariAchievements.length)
            ];
          this.showSafariResults("üèÜ", "Safari Champion!", randomAchievement);

          document.getElementById("continueButton").style.display = "block";

          // Safari level progression
          if (this.wordsConquered % 3 === 0) {
            this.safariLevel++;
            this.showSafariResults(
              "‚≠ê",
              "Safari Level Up!",
              `Welcome to Safari Level ${this.safariLevel}! New adventures await!`,
            );
          }

          this.updateSafariDisplay();
        }

        calculateWordSimilarity(word1, word2) {
          const longer = word1.length > word2.length ? word1 : word2;
          const shorter = word1.length > word2.length ? word2 : word1;
          const editDistance = this.computeLevenshteinDistance(longer, shorter);
          return (longer.length - editDistance) / longer.length;
        }

        computeLevenshteinDistance(str1, str2) {
          const matrix = [];
          for (let i = 0; i <= str2.length; i++) {
            matrix[i] = [i];
          }
          for (let j = 0; j <= str1.length; j++) {
            matrix[0][j] = j;
          }
          for (let i = 1; i <= str2.length; i++) {
            for (let j = 1; j <= str1.length; j++) {
              if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                matrix[i][j] = matrix[i - 1][j - 1];
              } else {
                matrix[i][j] = Math.min(
                  matrix[i - 1][j - 1] + 1,
                  matrix[i][j - 1] + 1,
                  matrix[i - 1][j] + 1,
                );
              }
            }
          }
          return matrix[str2.length][str1.length];
        }

        showSafariResults(emoji, title, message) {
          document.getElementById("resultEmoji").textContent = emoji;
          document.getElementById("resultTitle").textContent = title;
          document.getElementById("resultMessage").textContent = message;
          document.getElementById("safariResults").classList.add("show");
        }

        nextSafariLocation() {
          this.currentIndex = (this.currentIndex + 1) % this.safariWords.length;
          this.loadSafariWord();
        }

        updateSafariDisplay() {
          document.getElementById("safariLevel").textContent = this.safariLevel;
          document.getElementById("pridePoints").textContent = this.pridePoints;
          document.getElementById("wordsConquered").textContent =
            this.wordsConquered;

          const accuracy =
            this.totalTries > 0
              ? Math.round((this.successfulTries / this.totalTries) * 100)
              : 0;
          document.getElementById("safariAccuracy").textContent =
            accuracy + "%";

          const progress =
            (this.wordsConquered / this.safariWords.length) * 100;
          document.getElementById("journeyProgress").style.width =
            progress + "%";
          document.getElementById("progressStatus").textContent =
            `Exploring Kenya: ${this.wordsConquered}/${this.safariWords.length} locations discovered`;
        }
      }

      function returnHome() {
        if (
          confirm(
            "Kwaheri! Are you sure you want to end your Kenya Safari adventure? Your progress will be saved!",
          )
        ) {
          window.location.href = "../../index.html";
        }
      }

      // Initialize safari when page loads
      document.addEventListener("DOMContentLoaded", () => {
        window.safariGame = new SoundSafariKenya();
      });

      // Load voices when they're available
      if ("speechSynthesis" in window) {
        speechSynthesis.onvoiceschanged = () => {
          console.log(
            "Safari voices loaded:",
            speechSynthesis.getVoices().length,
          );
        };
      }
    </script>
  </body>
</html>
