<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Science Safari Lab - Virtual Experiments</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-in;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .sidebar {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            height: fit-content;
        }

        .sidebar-title {
            color: #667eea;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .experiment-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .experiment-item {
            background: #f5f5f5;
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .experiment-item:hover {
            background: #e8f5e9;
            border-color: #4caf50;
            transform: translateX(5px);
        }

        .experiment-item.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .experiment-item.completed {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .experiment-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .experiment-name {
            font-weight: bold;
            font-size: 0.95rem;
        }

        .experiment-category {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 3px;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .experiment-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .experiment-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .experiment-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .category-badge {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .lab-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            min-height: 400px;
        }

        .observation-panel {
            background: white;
            border: 3px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .observation-title {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .observation-text {
            color: #555;
            line-height: 1.8;
            font-size: 1rem;
        }

        .hypothesis-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .hypothesis-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .hypothesis-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .hypothesis-option {
            background: white;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .hypothesis-option:hover {
            background: #fff8dc;
            transform: translateX(5px);
        }

        .hypothesis-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .hypothesis-option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .hypothesis-option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .controls-panel {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        button {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-experiment {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-experiment:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-check {
            background: #4caf50;
            color: white;
        }

        .btn-check:hover {
            background: #388e3c;
        }

        .btn-check:disabled {
            background: #bdbdbd;
            cursor: not-allowed;
        }

        .btn-next {
            background: #ff9800;
            color: white;
        }

        .btn-next:hover {
            background: #f57c00;
        }

        .results-panel {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            display: none;
        }

        .results-panel.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .results-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .results-text {
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .kenya-info {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .kenya-info-title {
            color: #1976d2;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kenya-info-text {
            color: #555;
            line-height: 1.8;
        }

        .specimen-display {
            text-align: center;
            font-size: 8rem;
            margin: 30px 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .data-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }

        .data-table tr:hover {
            background: #f5f5f5;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e0e0e0;
            z-index: 0;
        }

        .step {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }

        .step.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .step.completed {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats-bar {
                flex-direction: column;
                gap: 15px;
            }

            .specimen-display {
                font-size: 5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¨ Science Safari Lab ü¶Å</h1>
            <p>Conduct virtual experiments about Kenya's ecosystems!</p>
        </div>

        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">üèÜ Score</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="completed">0</div>
                <div class="stat-label">‚úÖ Completed</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="discoveries">0</div>
                <div class="stat-label">üîç Discoveries</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">üìä Accuracy</div>
            </div>
        </div>

        <div class="main-layout">
            <div class="sidebar">
                <div class="sidebar-title">üß™ Experiments</div>
                <div class="experiment-list" id="experimentList"></div>
            </div>

            <div class="main-content">
                <div class="experiment-header">
                    <div class="experiment-title" id="experimentTitle">Food Chain in the Savanna</div>
                    <div class="experiment-subtitle" id="experimentSubtitle">Learn about predator-prey relationships</div>
                    <div class="category-badge" id="categoryBadge">Ecology</div>
                </div>

                <div class="progress-steps" id="progressSteps">
                    <div class="step active">1</div>
                    <div class="step">2</div>
                    <div class="step">3</div>
                    <div class="step">4</div>
                </div>

                <div class="lab-area" id="labArea">
                    <div id="experimentContent"></div>
                </div>

                <div class="controls-panel" id="controlsPanel"></div>

                <div class="results-panel" id="resultsPanel">
                    <div class="results-title">üéâ Experiment Complete!</div>
                    <div class="results-text" id="resultsText"></div>
                </div>

                <div class="kenya-info">
                    <div class="kenya-info-title">üá∞üá™ Kenya Connection</div>
                    <div class="kenya-info-text" id="kenyaInfo"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const experiments = [
            {
                id: 0,
                name: "Food Chain Safari",
                icon: "ü¶Å",
                category: "Ecology",
                title: "Food Chain in the Savanna",
                subtitle: "Learn about predator-prey relationships in Kenya's grasslands",
                kenyaInfo: "The Maasai Mara and Tsavo ecosystems have complex food chains. Lions hunt zebras and wildebeest, which eat grass. This balance is crucial for ecosystem health!",
                steps: [
                    {
                        type: "observation",
                        content: "In the savanna, different animals depend on each other for survival. Let's observe the food chain!",
                        specimen: "üåæ‚Üíü¶ì‚Üíü¶Å",
                        question: "What happens if we remove one link from this chain?"
                    },
                    {
                        type: "hypothesis",
                        question: "If the number of lions decreases, what will happen to the zebra population?",
                        options: [
                            "Zebra population will increase",
                            "Zebra population will decrease",
                            "Zebra population stays the same",
                            "Grass will disappear"
                        ],
                        correct: 0,
                        explanation: "Correct! With fewer predators, zebra population will increase because fewer are being hunted."
                    },
                    {
                        type: "experiment",
                        content: "Simulate what happens over 5 years with different lion populations",
                        data: [
                            { year: "Year 1", lions: 100, zebras: 500, grass: "100%" },
                            { year: "Year 2", lions: 80, zebras: 600, grass: "90%" },
                            { year: "Year 3", lions: 60, zebras: 750, grass: "75%" },
                            { year: "Year 4", lions: 40, zebras: 900, grass: "60%" },
                            { year: "Year 5", lions: 20, zebras: 1100, grass: "40%" }
                        ]
                    },
                    {
                        type: "conclusion",
                        results: "As lion populations decreased, zebra numbers increased rapidly. However, more zebras ate more grass, reducing vegetation. This shows how removing predators affects the entire ecosystem!"
                    }
                ]
            },
            {
                id: 1,
                name: "Water Cycle",
                icon: "üíß",
                category: "Earth Science",
                title: "The Water Cycle in Kenya",
                subtitle: "Discover how water moves through Kenya's environment",
                kenyaInfo: "Kenya's water cycle is vital for the Tana and Athi rivers, Lake Victoria, and rainfall patterns. The long rains (March-May) and short rains (October-December) are crucial for agriculture!",
                steps: [
                    {
                        type: "observation",
                        content: "Water continuously moves between the ocean, atmosphere, and land through evaporation, condensation, and precipitation.",
                        specimen: "‚òÄÔ∏èüíß‚òÅÔ∏èüåßÔ∏è",
                        question: "How does water from the Indian Ocean reach Mount Kenya?"
                    },
                    {
                        type: "hypothesis",
                        question: "What happens when the sun heats ocean water near Mombasa?",
                        options: [
                            "Water evaporates into the air",
                            "Water freezes",
                            "Water sinks to the bottom",
                            "Water turns into soil"
                        ],
                        correct: 0,
                        explanation: "Correct! Heat causes water to evaporate, turning liquid water into water vapor that rises into the atmosphere."
                    },
                    {
                        type: "experiment",
                        content: "Track water movement through Kenya's water cycle",
                        data: [
                            { stage: "Ocean (Mombasa)", state: "Liquid", temperature: "28¬∞C" },
                            { stage: "Evaporation", state: "Water Vapor", temperature: "30¬∞C" },
                            { stage: "Clouds Form", state: "Tiny Droplets", temperature: "15¬∞C" },
                            { stage: "Rain (Nairobi)", state: "Liquid", temperature: "18¬∞C" },
                            { stage: "Rivers/Lakes", state: "Liquid", temperature: "22¬∞C" }
                        ]
                    },
                    {
                        type: "conclusion",
                        results: "Water continuously cycles through evaporation from oceans, formation of clouds, precipitation as rain, and collection in rivers and lakes. This cycle provides fresh water for all of Kenya's ecosystems!"
                    }
                ]
            },
            {
                id: 2,
                name: "Photosynthesis",
                icon: "üåø",
                category: "Biology",
                title: "How Plants Make Food",
                subtitle: "Study photosynthesis in acacia trees",
                kenyaInfo: "Acacia trees are iconic in Kenyan savannas. They use photosynthesis to create food, providing shade for animals and food for giraffes. Their deep roots also prevent soil erosion!",
                steps: [
                    {
                        type: "observation",
                        content: "Plants use sunlight, water, and carbon dioxide to make their own food (glucose) and release oxygen.",
                        specimen: "üåû+üíß+üí®‚Üíüåø+üí®",
                        question: "What do plants need to survive and grow?"
                    },
                    {
                        type: "hypothesis",
                        question: "If we block sunlight from reaching a plant's leaves, what will happen?",
                        options: [
                            "Plant will stop growing",
                            "Plant will grow faster",
                            "Plant will change color only",
                            "Nothing will change"
                        ],
                        correct: 0,
                        explanation: "Correct! Without sunlight, plants cannot perform photosynthesis, so they can't make food and will stop growing."
                    },
                    {
                        type: "experiment",
                        content: "Compare plant growth with different amounts of sunlight",
                        data: [
                            { condition: "Full Sunlight", height: "100%", color: "Dark Green", health: "Excellent" },
                            { condition: "Partial Shade", height: "75%", color: "Medium Green", health: "Good" },
                            { condition: "Heavy Shade", height: "40%", color: "Light Green", health: "Poor" },
                            { condition: "No Light", height: "0%", color: "Yellow", health: "Dying" }
                        ]
                    },
                    {
                        type: "conclusion",
                        results: "Plants need sunlight for photosynthesis. Without it, they cannot produce food and will die. This is why plants in forests compete to reach sunlight and why deforestation affects ecosystems!"
                    }
                ]
            },
            {
                id: 3,
                name: "Soil Erosion",
                icon: "‚õ∞Ô∏è",
                category: "Environmental",
                title: "Soil Erosion and Conservation",
                subtitle: "Learn how to protect Kenya's soil",
                kenyaInfo: "Soil erosion is a major challenge in Kenya, especially in areas with deforestation. The Rift Valley and highland areas need terracing and tree planting to prevent soil loss!",
                steps: [
                    {
                        type: "observation",
                        content: "Soil erosion occurs when wind or water removes topsoil. This reduces land fertility and can cause environmental damage.",
                        specimen: "üåßÔ∏è‚Üí‚õ∞Ô∏è‚Üíüíß",
                        question: "What helps hold soil in place?"
                    },
                    {
                        type: "hypothesis",
                        question: "Which area will have MORE soil erosion during heavy rain?",
                        options: [
                            "Bare hillside with no plants",
                            "Hillside covered with trees and grass",
                            "Flat land with rocks",
                            "All have equal erosion"
                        ],
                        correct: 0,
                        explanation: "Correct! Bare hillsides erode quickly because there are no plant roots to hold the soil. Trees and grass protect soil from erosion."
                    },
                    {
                        type: "experiment",
                        content: "Compare soil loss under different conditions",
                        data: [
                            { location: "Forest Area", vegetation: "Dense Trees", soil_loss: "5%", status: "Protected" },
                            { location: "Grassland", vegetation: "Grass Cover", soil_loss: "15%", status: "Moderate" },
                            { location: "Farmland", vegetation: "Seasonal Crops", soil_loss: "35%", status: "At Risk" },
                            { location: "Bare Land", vegetation: "None", soil_loss: "70%", status: "Critical" }
                        ]
                    },
                    {
                        type: "conclusion",
                        results: "Plant roots hold soil in place! Areas without vegetation lose soil rapidly during rain. Kenya needs tree planting and terracing to prevent erosion and maintain fertile land for farming."
                    }
                ]
            },
            {
                id: 4,
                name: "Animal Adaptation",
                icon: "ü¶í",
                category: "Biology",
                title: "How Animals Adapt to Survive",
                subtitle: "Study giraffe adaptations in the savanna",
                kenyaInfo: "Giraffes evolved long necks to reach acacia leaves other animals can't reach. The Maasai giraffe and reticulated giraffe are subspecies found in different parts of Kenya!",
                steps: [
                    {
                        type: "observation",
                        content: "Animals develop special features (adaptations) that help them survive in their environment. Giraffes have long necks, lions have sharp claws, and elephants have trunks.",
                        specimen: "ü¶í",
                        question: "Why do giraffes have such long necks?"
                    },
                    {
                        type: "hypothesis",
                        question: "What advantage does a giraffe's long neck provide?",
                        options: [
                            "Reach food high in trees that others can't",
                            "Run faster from predators",
                            "Dig deeper holes",
                            "Swim better in rivers"
                        ],
                        correct: 0,
                        explanation: "Correct! Long necks let giraffes eat acacia leaves from tall trees, giving them access to food that other herbivores cannot reach. This reduces competition!"
                    },
                    {
                        type: "experiment",
                        content: "Compare feeding heights of different animals",
                        data: [
                            { animal: "Giraffe ü¶í", max_height: "6 meters", food: "Top tree leaves", competition: "Low" },
                            { animal: "Elephant üêò", max_height: "4 meters", food: "Mid-level leaves", competition: "Medium" },
                            { animal: "Zebra ü¶ì", max_height: "1.5 meters", food: "Grass & low plants", competition: "High" },
                            { animal: "Warthog üêó", max_height: "0.5 meters", food: "Ground plants", competition: "High" }
                        ]
                    },
                    {
                        type: "conclusion",
                        results: "Animals adapt to reduce competition for resources. Giraffes' long necks allow them to access a food source that other animals can't reach, helping them survive in Kenya's savannas!"
                    }
                ]
            },
            {
                id: 5,
                name: "Climate Zones",
                icon: "üå°Ô∏è",
                category: "Geography",
                title: "Kenya's Climate Zones",
                subtitle: "Explore different climates across Kenya",
                kenyaInfo: "Kenya has diverse climates from hot coastal areas (Mombasa 30¬∞C+), temperate highlands (Nairobi 20¬∞C), to cold mountain peaks (Mt. Kenya below 0¬∞C). This diversity supports different ecosystems!",
                steps: [
                    {
                        type: "observation",
                        content: "Kenya has multiple climate zones from sea level to high mountains, each supporting different plants and animals.",
                        specimen: "üèñÔ∏è‚Üíüå≥‚Üí‚õ∞Ô∏è‚ÜíüèîÔ∏è",
                        question: "Why is it hotter at the coast than on Mount Kenya?"
                    },
                    {
                        type: "hypothesis",
                        question: "As altitude (height above sea level) increases, what happens to temperature?",
                        options: [
                            "Temperature decreases",
                            "Temperature increases",
                            "Temperature stays the same",
                            "It depends on the season only"
                        ],
                        correct: 0,
                        explanation: "Correct! Temperature drops about 6¬∞C for every 1000 meters of elevation. That's why Mount Kenya has snow even though it's on the equator!"
                    },
                    {
                        type: "experiment",
                        content: "Compare temperatures at different altitudes in Kenya",
                        data: [
                            { location: "Mombasa Coast", altitude: "0m", temp: "30¬∞C", climate: "Hot & Humid" },
                            { location: "Nairobi", altitude: "1,795m", temp: "19¬∞C", climate: "Temperate" },
                            { location: "Aberdare Ranges", altitude: "3,000m", temp: "12¬∞C", climate: "Cool" },
                            { location: "Mt. Kenya Peak", altitude: "5,199m", temp: "-5¬∞C", climate: "Alpine/Snow" }
                        ]
                    },
                    {
                        type: "conclusion",
                        results: "Kenya's varied altitude creates different climate zones supporting diverse ecosystems. Coastal areas are tropical, highlands are temperate, and mountain peaks have alpine conditions with snow and ice!"
                    }
                ]
            }
        ];

        let currentExperiment = 0;
        let currentStep = 0;
        let score = 0;
        let completed = 0;
        let discoveries = 0;
        let totalAttempts = 0;
        let correctAttempts = 0;
        let selectedHypothesisIndex = null;

        function initGame() {
            renderExperimentList();
            loadExperiment(0);
            updateStats();
        }

        function renderExperimentList() {
            const list = document.getElementById('experimentList');
            list.innerHTML = experiments.map((exp, index) => `
                <div class="experiment-item ${index === currentExperiment ? 'active' : ''}" onclick="loadExperiment(${index})">
                    <div class="experiment-icon">${exp.icon}</div>
                    <div class="experiment-name">${exp.name}</div>
                    <div class="experiment-category">${exp.category}</div>
                </div>
            `).join('');
        }

        function loadExperiment(index) {
            currentExperiment = index;
            currentStep = 0;
            const exp = experiments[index];
            
            document.getElementById('experimentTitle').textContent = exp.title;
            document.getElementById('experimentSubtitle').textContent = exp.subtitle;
            document.getElementById('categoryBadge').textContent = exp.category;
            document.getElementById('kenyaInfo').textContent = exp.kenyaInfo;
            document.getElementById('resultsPanel').classList.remove('show');
            
            renderExperimentList();
            loadStep();
            updateStats();
            updateProgressSteps();
        }

        function updateProgressSteps() {
            const exp = experiments[currentExperiment];
            const stepsContainer = document.getElementById('progressSteps');
            stepsContainer.innerHTML = exp.steps.map((_, index) => `
                <div class="step ${index === currentStep ? 'active' : index < currentStep ? 'completed' : ''}">${index + 1}</div>
            `).join('');
        }

        function loadStep() {
            const exp = experiments[currentExperiment];
            const step = exp.steps[currentStep];
            const content = document.getElementById('experimentContent');
            const controls = document.getElementById('controlsPanel');
            
            updateProgressSteps();
            
            if (step.type === 'observation') {
                content.innerHTML = `
                    <div class="observation-panel">
                        <div class="observation-title">üëÅÔ∏è Observation</div>
                        <div class="observation-text">${step.content}</div>
                    </div>
                    <div class="specimen-display">${step.specimen}</div>
                    <div style="text-align: center; font-size: 1.2rem; color: #666; margin-top: 20px;">
                        ${step.question}
                    </div>
                `;
                controls.innerHTML = `
                    <button class="btn-experiment" onclick="nextStep()">
                        üî¨ Begin Experiment
                    </button>
                `;
            } else if (step.type === 'hypothesis') {
                content.innerHTML = `
                    <div class="hypothesis-section">
                        <div class="hypothesis-title">ü§î Form Your Hypothesis</div>
                        <p style="margin-bottom: 15px; color: #856404;">${step.question}</p>
                        <div class="hypothesis-options" id="hypothesisOptions">
                            ${step.options.map((option, index) => `
                                <div class="hypothesis-option" onclick="selectHypothesis(${index})">
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                controls.innerHTML = `
                    <button class="btn-check" onclick="checkHypothesis()" id="checkBtn" disabled>
                        ‚úì Check Hypothesis
                    </button>
                `;
            } else if (step.type === 'experiment') {
                const tableHtml = step.data.length > 0 ? `
                    <table class="data-table">
                        <thead>
                            <tr>
                                ${Object.keys(step.data[0]).map(key => `<th>${key.replace(/_/g, ' ').toUpperCase()}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${step.data.map(row => `
                                <tr>
                                    ${Object.values(row).map(val => `<td>${val}</td>`).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                ` : '';
                
                content.innerHTML = `
                    <div class="observation-panel">
                        <div class="observation-title">üî¨ Experiment Results</div>
                        <div class="observation-text">${step.content}</div>
                    </div>
                    ${tableHtml}
                    <div style="text-align: center; margin-top: 20px;">
                        <p style="font-size: 1.1rem; color: #666;">Analyze the data above and look for patterns!</p>
                    </div>
                `;
                controls.innerHTML = `
                    <button class="btn-experiment" onclick="nextStep()">
                        üìä View Conclusions
                    </button>
                `;
            } else if (step.type === 'conclusion') {
                content.innerHTML = `
                    <div class="observation-panel">
                        <div class="observation-title">‚úÖ Conclusion</div>
                        <div class="observation-text">${step.results}</div>
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <div style="font-size: 6rem;">üéâ</div>
                        <h3 style="color: #4caf50; margin-top: 20px;">Experiment Complete!</h3>
                    </div>
                `;
                controls.innerHTML = `
                    <button class="btn-next" onclick="completeExperiment()">
                        ‚Üí Next Experiment
                    </button>
                `;
            }
        }

        function selectHypothesis(index) {
            selectedHypothesisIndex = index;
            const options = document.querySelectorAll('.hypothesis-option');
            options.forEach((opt, i) => {
                opt.classList.toggle('selected', i === index);
            });
            document.getElementById('checkBtn').disabled = false;
        }

        function checkHypothesis() {
            const exp = experiments[currentExperiment];
            const step = exp.steps[currentStep];
            const options = document.querySelectorAll('.hypothesis-option');
            
            totalAttempts++;
            
            options.forEach((opt, index) => {
                opt.onclick = null;
                if (index === step.correct) {
                    opt.classList.add('correct');
                } else if (index === selectedHypothesisIndex) {
                    opt.classList.add('incorrect');
                }
            });
            
            if (selectedHypothesisIndex === step.correct) {
                score += 100;
                correctAttempts++;
                discoveries++;
                showResults(true, step.explanation);
            } else {
                showResults(false, step.explanation);
            }
            
            document.getElementById('controlsPanel').innerHTML = `
                <button class="btn-experiment" onclick="nextStep()">
                    ‚Üí Continue Experiment
                </button>
            `;
            
            updateStats();
        }

        function showResults(correct, explanation) {
            const resultsPanel = document.getElementById('resultsPanel');
            const resultsTitle = resultsPanel.querySelector('.results-title');
            const resultsText = document.getElementById('resultsText');
            
            if (correct) {
                resultsPanel.style.background = 'linear-gradient(135deg, #4caf50 0%, #81c784 100%)';
                resultsTitle.textContent = 'üéâ Correct Hypothesis!';
                resultsText.textContent = explanation;
            } else {
                resultsPanel.style.background = 'linear-gradient(135deg, #ff9800 0%, #ffb74d 100%)';
                resultsTitle.textContent = 'üìö Learning Opportunity';
                resultsText.textContent = explanation + ' Keep practicing your scientific thinking!';
            }
            
            resultsPanel.classList.add('show');
        }

        function nextStep() {
            const exp = experiments[currentExperiment];
            document.getElementById('resultsPanel').classList.remove('show');
            
            if (currentStep < exp.steps.length - 1) {
                currentStep++;
                loadStep();
            }
        }

        function completeExperiment() {
            completed++;
            score += 200;
            updateStats();
            
            if (currentExperiment < experiments.length - 1) {
                loadExperiment(currentExperiment + 1);
            } else {
                showFinalResults();
            }
        }

        function showFinalResults() {
            const content = document.getElementById('experimentContent');
            const controls = document.getElementById('controlsPanel');
            
            content.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 8rem; margin-bottom: 20px;">üèÜ</div>
                    <h1 style="color: #667eea; font-size: 2.5rem; margin-bottom: 20px;">
                        Safari Complete!
                    </h1>
                    <p style="font-size: 1.5rem; color: #666; margin-bottom: 30px;">
                        You've completed all experiments!
                    </p>
                    <div style="background: #f5f5f5; border-radius: 15px; padding: 30px; display: inline-block;">
                        <div style="font-size: 3rem; font-weight: bold; color: #667eea;">${score}</div>
                        <div style="color: #666;">Total Score</div>
                    </div>
                    <p style="font-size: 1.2rem; color: #666; margin-top: 30px;">
                        You made ${discoveries} scientific discoveries!<br>
                        Accuracy: ${totalAttempts > 0 ? Math.round((correctAttempts/totalAttempts)*100) : 0}%
                    </p>
                </div>
            `;
            
            controls.innerHTML = `
                <button class="btn-experiment" onclick="location.reload()">
                    üîÑ Start New Safari
                </button>
            `;
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('completed').textContent = completed;
            document.getElementById('discoveries').textContent = discoveries;
            
            const accuracy = totalAttempts > 0 ? Math.round((correctAttempts / totalAttempts) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        initGame();
    </script>
</body>
</html>